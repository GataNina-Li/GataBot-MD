import fetch from 'node-fetch'
import cheerio from 'cheerio'
let handler = async (m, { conn, args, command, usedPrefix }) => {
if (!db.data.chats[m.chat].modohorny && m.isGroup) throw `${lenguajeGB['smsAvisoAG']()}ğ™‡ğ™Šğ™ ğ˜¾ğ™Šğ™ˆğ˜¼ğ™‰ğ˜¿ğ™Šğ™ +18 ğ™€ğ™ğ™ğ˜¼ğ™‰ ğ˜¿ğ™€ğ™ğ˜¼ğ˜¾ğ™ğ™„ğ™‘ğ˜¼ğ˜¿ğ™Šğ™ ğ™ğ™ğ™€ #ğ™¤ğ™£ ğ™¢ğ™¤ğ™™ğ™¤ğ™ğ™¤ğ™§ğ™£ğ™® ğ™‹ğ˜¼ğ™ğ˜¼ ğ˜¼ğ˜¾ğ™ğ™„ğ™‘ğ˜¼ğ™\n\n+18 ğ˜¾ğ™Šğ™ˆğ™ˆğ˜¼ğ™‰ğ˜¿ğ™ ğ˜¼ğ™ğ™€ ğ˜¿ğ™„ğ™ğ˜¼ğ˜½ğ™‡ğ™€ğ˜¿ ğ™ğ™ğ™€ #ğ™¤ğ™£ ğ™¢ğ™¤ğ™™ğ™¤ğ™ğ™¤ğ™§ğ™£ğ™® ğ™ğ™Š ğ™€ğ™‰ğ˜¼ğ˜½ğ™‡ğ™€*`
if (!args[0]) throw `ğ™„ğ™‰ğ™‚ğ™ğ™€ğ™ğ™€ ğ™ğ™‰ ğ™€ğ™‰ğ™‡ğ˜¼ğ˜¾ğ™€ ğ™‘ğ˜¼ğ™‡ğ™„ğ˜¿ğ™Š ğ˜¿ğ™€ ğ™“ğ™‰ğ™“ğ™“, ğ™€ğ™…ğ™€ğ™ˆğ™‹ğ™‡ğ™Š: ${usedPrefix + command} https://www.xnxx.com/video-14lcwbe8/rubia_novia_follada_en_cuarto_de_bano*`
try {
await delay(6000)
await conn.reply(m.chat, 'â¤ ğ™€ğ™ğ™‹ğ™€ğ™ğ™€ ğ™‹ğ™Šğ™ ğ™ğ˜¼ğ™‘ğ™Šğ™ ğ˜¼ ğ™Œğ™ğ™€ ğ™ğ™€ ğ™€ğ™‰ğ™‘ğ™„ğ™€ ğ™€ğ™‡ ğ™‘ğ™„ğ˜¿ğ™€ğ™Š\n\nâ¤ ğ™‹ğ™‡ğ™€ğ˜¼ğ™ğ™€ ğ™’ğ˜¼ğ™„ğ™ ğ™ğ™Šğ™ ğ™ğ™ƒğ™€ ğ™‘ğ™„ğ˜¿ğ™€ğ™Š ğ™ğ™Š ğ˜½ğ™€ ğ™ğ™€ğ™‰', m)
let res = await xnxxdl(args[0])
let json = await res.result.files
conn.sendMessage(m.chat, { document: { url: json.high }, mimetype: 'video/mp4', fileName: res.result.title }, { quoted: m })
} catch (e) {
m.reply(`${lenguajeGB['smsAvisoFG']()}ğ™‰ğ™Š ğ™ğ™ğ™‰ğ˜¾ğ™„ğ™Šğ™‰ğ™Š, ğ™ğ™ğ™€ ğ™ğ™‰ ğ™€ğ™‰ğ™‡ğ˜¼ğ˜¾ğ™€ ğ˜¿ğ™€ ğ™“ğ™‰ğ™“ğ™“, ğ™‘ğ™ğ™€ğ™‡ğ™‘ğ˜¼ ğ˜¼ ğ™„ğ™‰ğ™ğ™€ğ™‰ğ™ğ˜¼ğ™\n\nğ˜¿ğ™„ğ˜¿ğ™‰ğ™ ğ™’ğ™Šğ™ğ™†, ğ™ğ™ğ™€ ğ˜¼ğ™‰ ğ™“ğ™‰ğ™“ğ™“ ğ™‡ğ™„ğ™‰ğ™†, ğ™ğ™ğ™” ğ˜¼ğ™‚ğ˜¼ğ™„ğ™‰`)
}}
handler.command = /^(xnxxdl)$/i
handler.level = 8
handler.money = 1400
handler.register = true
export default handler
const delay = time => new Promise(res => setTimeout(res, time))

async function xnxxdl(URL) {
return new Promise((resolve, reject) => {
fetch(`${URL}`, {method: 'get'}).then(res => res.text()).then(res => {
let $ = cheerio.load(res, { xmlMode: false  });
const title = $('meta[property="og:title"]').attr('content');
const duration = $('meta[property="og:duration"]').attr('content');
const image = $('meta[property="og:image"]').attr('content');
const videoType = $('meta[property="og:video:type"]').attr('content');
const videoWidth = $('meta[property="og:video:width"]').attr('content');
const videoHeight = $('meta[property="og:video:height"]').attr('content');
const info = $('span.metadata').text();
const videoScript = $('#video-player-bg > script:nth-child(6)').html();
const files = {
low: (videoScript.match('html5player.setVideoUrlLow\\(\'(.*?)\'\\);') || [])[1],
high: videoScript.match('html5player.setVideoUrlHigh\\(\'(.*?)\'\\);' || [])[1],
HLS: videoScript.match('html5player.setVideoHLS\\(\'(.*?)\'\\);' || [])[1],
thumb: videoScript.match('html5player.setThumbUrl\\(\'(.*?)\'\\);' || [])[1],
thumb69: videoScript.match('html5player.setThumbUrl169\\(\'(.*?)\'\\);' || [])[1],
thumbSlide: videoScript.match('html5player.setThumbSlide\\(\'(.*?)\'\\);' || [])[1],
thumbSlideBig: videoScript.match('html5player.setThumbSlideBig\\(\'(.*?)\'\\);' || [])[1], };
resolve({ status: 200, result: { title, URL, duration, image, videoType, videoWidth, videoHeight, info, files }})}).catch(err => reject({code: 503, status: false, result: err }))})}
